# CRUD Сервис на Node.js, Express и PostgreSQL

Это простой CRUD (Create, Read, Update, Delete) сервис для управления пользователями, созданный с использованием Node.js, фреймворка Express и базы данных PostgreSQL.

## Описание проекта

Проект представляет собой базовый REST API, который позволяет выполнять следующие операции над пользователями:
- Создание нового пользователя
- Получение списка всех пользователей
- Получение конкретного пользователя по его ID
- Обновление информации о пользователе
- Удаление пользователя

Данные хранятся в базе данных PostgreSQL.

### Ключевые технологии
- **Node.js**: Среда выполнения для JavaScript-кода.
- **Express**: Веб-фреймворк для Node.js, используемый для создания сервера и обработки маршрутов.
- **PostgreSQL (pg)**: Клиент для работы с базой данных PostgreSQL.
- **express-validator**: Middleware для Express.js для гибкой валидации данных запроса.
- **uuid**: Библиотека для генерации уникальных идентификаторов (ID) для новых пользователей.
- **dotenv**: Модуль для загрузки переменных окружения из файла `.env`.
- **winston**: Библиотека для логирования запросов и ошибок.
- **nodemon**: Инструмент, который помогает в разработке, автоматически перезапуская сервер при обнаружении изменений в файлах.

## Установка и запуск проекта

### 1. Клонируйте репозиторий
```bash
git clone <repository-url>
cd Basic-CRUD-Service
```

### 2. Установите зависимости
Выполните следующую команду в корне проекта, чтобы установить все необходимые зависимости, перечисленные в `package.json`:
```bash
npm install
```

### 3. Настройте переменные окружения
Создайте файл `.env` в корне проекта и добавьте переменные для подключения к вашей базе данных PostgreSQL и для порта сервера.

Пример содержимого файла `.env`:
```
# Server
PORT=5000

# PostgreSQL Database
DB_USER=postgres
DB_HOST=localhost
DB_NAME=crud_db
DB_PASSWORD=your_password
DB_PORT=5432
```
Если `PORT` не указан, сервер по умолчанию запустится на порту `3000`.

### 4. Запустите проект
Чтобы запустить сервер в режиме разработки (с автоматическим перезапуском при изменении файлов), выполните:
```bash
npm start
```
При первом запуске будет автоматически создана таблица `users`, если она не существует.

После запуска вы увидите в консоли сообщение:
```
Сервер запущен: http://localhost:5000
```

## API Эндпоинты

Все запросы следует отправлять на `http://localhost:5000/users`.

### Получить всех пользователей
- **Метод**: `GET`
- **URL**: `/users`
- **Описание**: Возвращает список всех пользователей.

### Добавить нового пользователя
- **Метод**: `POST`
- **URL**: `/users`
- **Описание**: Добавляет нового пользователя в базу данных.
- **Тело запроса (JSON)**:
  ```json
  {
    "first_name": "Jane",
    "last_name": "Doe",
    "email": "janedoe@example.com"
  }
  ```

### Получить пользователя по ID
- **Метод**: `GET`
- **URL**: `/users/:id`
- **Описание**: Возвращает одного пользователя по его уникальному ID.

### Удалить пользователя по ID
- **Метод**: `DELETE`
- **URL**: `/users/:id`
- **Описание**: Удаляет пользователя по его уникальному ID.

### Обновить информацию о пользователе
- **Метод**: `PATCH`
- **URL**: `/users/:id`
- **Описание**: Частично обновляет информацию о пользователе по его ID.
- **Тело запроса (JSON)** (необходимо передать хотя бы одно поле):
  ```json
  {
    "first_name": "Johnathan"
  }
  ```

## Логирование
Сервис использует `winston` для логирования. Все запросы, ошибки и другие важные события записываются в файлы в директории `/logs`.
- `combined.log`: Все логи.
- `error.log`: Только ошибки.
- `exceptions.log`: Неперехваченные исключения.
- `rejections.log`: Необработанные promise rejections.